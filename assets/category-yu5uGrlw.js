import{a as o,e as a,s,b as p}from"./toast-L9_XbE0d.js";import{E as b,h as n,q as k,G as m,H as E,y as w,x}from"./index-hYmgoq33.js";const i="http://5.182.26.68:3000/api";function z(t){return o.post(i+"/category/create",t)}function K(){return o.get(i+"/category/all ")}function R(t){return o.get(i+`/category/${t}`)}function X(t){return o.put(i+`/category/${t.id}`,t)}function A(t){return o.delete(i+`/category/${t}`)}const u=b("category",{state:()=>({categorylist:[],singleCategory:{},loading:!1}),actions:{async addCategory(t){var r;this.loading=!0;try{if((await z(t)).status!==201){a("Kategoriya yaratishda xatolik! Qayta urinib ko'ring");return}this.loading=!1,s("Kategoriya yaratildi"),n.push({name:k.RT_CATEGORY})}catch(e){if(p.isAxiosError(e)){if(((r=e.response)==null?void 0:r.status)===400){a("Xatolik yuz berdi!");return}a("Xatolik yuz berdi!")}}},async fetchAllCategory(){this.loading=!0;try{const t=await K();if(t.status!==200)return;this.loading=!1,this.categorylist=t==null?void 0:t.data}catch(t){t instanceof Error&&a("Xatolik yuz berdi!")}},async fetchOneCategory(t){this.loading=!0;try{const r=await R(t);if(r.status!==200)return;this.loading=!1,this.singleCategory=r==null?void 0:r.data}catch(r){if(r instanceof Error){a("Xatolik yuz berdi!");return}}},async updateCategory(t){this.loading=!0;try{if((await X(t)).status!==200){a("Kategoriya tahrirlanmadi!");return}this.loading=!1,s("Kategoriya tahrirlandi!"),n.go(0)}catch(r){if(r instanceof Error){a("Xatolik yuz berdi!");return}}},async deleteCategory(t){this.loading=!0;try{if((await A(t)).status!==200){a("Kategoriya o'chirilmadi!");return}this.loading=!1,s("Kategoriya o'chirildi!"),n.go(0)}catch(r){if(r instanceof Error){a("Xatolik yuz berdi!");return}}}}}),$=()=>{const t=u(),r=m(),e=E(),{loading:y,singleCategory:g,categorylist:l}=w(t),{addCategory:d,fetchAllCategory:c,fetchOneCategory:f,updateCategory:h,deleteCategory:C}=u();return x(async()=>{await c()}),{addCategory:d,fetchAllCategory:c,fetchOneCategory:f,updateCategory:h,deleteCategory:C,loading:y,singleCategory:g,categorylist:l,router:r,route:e}};export{$ as u};
