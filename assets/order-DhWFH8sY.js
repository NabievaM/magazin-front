import{a,e as t,s as o,b as g}from"./toast-CccczBrV.js";import{E as m,h as n,q as p,G as b,H as k,y as z}from"./index-DeAQhIB6.js";const i="https://api.uzbekstore.uz/api";function R(r){return a.post(i+"/user/create",r)}function E(){return a.get(i+"/user/all")}function x(r){return a.get(i+`/user/${r}`)}function X(r){return a.delete(i+`/user/${r}`)}const u=m("order",{state:()=>({orders:[],loading:!1,singleOrder:{}}),actions:{async addOrder(r){var e;this.loading=!0;try{if((await R(r)).status!==201){t("Buyurtma qilishda xatolik! Qayta urinib ko'ring");return}this.loading=!1,o("Buyurtma qilindi!"),n.push({})}catch(s){if(g.isAxiosError(s)){if(((e=s.response)==null?void 0:e.status)===400){t("Xatolik yuz berdi!");return}t("Xatolik yuz berdi!")}}},async fetchAllOrders(){this.loading=!0;try{const r=await E();if(r.status!==200)return;this.loading=!1,this.orders=r==null?void 0:r.data}catch(r){r instanceof Error&&t("Xatolik yuz berdi!")}},async fetchOneOrder(r){this.loading=!0;try{const e=await x(r);if(e.status!==200)return;this.loading=!1,this.singleOrder=e==null?void 0:e.data}catch(e){if(e instanceof Error){t("Xatolik yuz berdi!");return}}},async deleteOrder(r){this.loading=!0;try{if((await X(r)).status!==200){t("Buyurtma o'chirilmadi!");return}this.loading=!1,o("Buyurtma o'chirildi!"),n.push({name:p.RT_ORDER})}catch(e){if(e instanceof Error){t("Xatolik yuz berdi!");return}}}}}),B=()=>{const r=u(),e=b(),s=k(),{loading:d,orders:c,singleOrder:l}=z(r),{addOrder:f,deleteOrder:h,fetchAllOrders:O,fetchOneOrder:y}=u();return{addOrder:f,deleteOrder:h,fetchAllOrders:O,loading:d,orders:c,router:e,route:s,singleOrder:l,fetchOneOrder:y}};export{B as u};
