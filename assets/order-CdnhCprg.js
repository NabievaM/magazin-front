import{a,e,s as o,b as g}from"./toast-L9_XbE0d.js";import{E as m,h as n,q as p,G as b,H as k,y as R}from"./index-hYmgoq33.js";const i="http://5.182.26.68:3000/api";function E(r){return a.post(i+"/user/create",r)}function x(){return a.get(i+"/user/all")}function z(r){return a.get(i+`/user/${r}`)}function X(r){return a.delete(i+`/user/${r}`)}const u=m("order",{state:()=>({orders:[],loading:!1,singleOrder:{}}),actions:{async addOrder(r){var t;this.loading=!0;try{if((await E(r)).status!==201){e("Buyurtma qilishda xatolik! Qayta urinib ko'ring");return}this.loading=!1,o("Buyurtma qilindi!"),n.push({})}catch(s){if(g.isAxiosError(s)){if(((t=s.response)==null?void 0:t.status)===400){e("Xatolik yuz berdi!");return}e("Xatolik yuz berdi!")}}},async fetchAllOrders(){this.loading=!0;try{const r=await x();if(r.status!==200)return;this.loading=!1,this.orders=r==null?void 0:r.data}catch(r){r instanceof Error&&e("Xatolik yuz berdi!")}},async fetchOneOrder(r){this.loading=!0;try{const t=await z(r);if(t.status!==200)return;this.loading=!1,this.singleOrder=t==null?void 0:t.data}catch(t){if(t instanceof Error){e("Xatolik yuz berdi!");return}}},async deleteOrder(r){this.loading=!0;try{if((await X(r)).status!==200){e("Buyurtma o'chirilmadi!");return}this.loading=!1,o("Buyurtma o'chirildi!"),n.push({name:p.RT_ORDER})}catch(t){if(t instanceof Error){e("Xatolik yuz berdi!");return}}}}}),B=()=>{const r=u(),t=b(),s=k(),{loading:d,orders:c,singleOrder:l}=R(r),{addOrder:f,deleteOrder:h,fetchAllOrders:O,fetchOneOrder:y}=u();return{addOrder:f,deleteOrder:h,fetchAllOrders:O,loading:d,orders:c,router:t,route:s,singleOrder:l,fetchOneOrder:y}};export{B as u};
